const S="modulepreload",y=function(n){return"/AstroPaperBlog/"+n},h={},w=function(s,d,u){let f=Promise.resolve();if(d&&d.length>0){let t=function(e){return Promise.all(e.map(o=>Promise.resolve(o).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=r?.nonce||r?.getAttribute("nonce");f=t(d.map(e=>{if(e=y(e),e in h)return;h[e]=!0;const o=e.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${l}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":S,o||(a.as="script"),a.crossOrigin="",a.href=e,c&&a.setAttribute("nonce",c),document.head.appendChild(a),o)return new Promise((m,p)=>{a.addEventListener("load",m),a.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${e}`)))})}))}function i(t){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=t,window.dispatchEvent(r),!r.defaultPrevented)throw t}return f.then(t=>{for(const r of t||[])r.status==="rejected"&&i(r.reason);return s().catch(i)})};function g(){const n=document.querySelector("#pagefind-search");if(!n)return;const s=new URLSearchParams(window.location.search);(window.requestIdleCallback||(u=>setTimeout(u,1)))(async()=>{try{console.log("Initializing Pagefind with BASE_URL:","/AstroPaperBlog/");const{PagefindUI:t}=await w(async()=>{const{PagefindUI:e}=await import("./ui-core.DHwDsune.js");return{PagefindUI:e}},[]);console.log("Creating PagefindUI...");const r=new t({element:"#pagefind-search",showSubResults:!0,showImages:!1,basePath:"/AstroPaperBlog/pagefind/",processTerm:function(e){s.set("q",e),history.replaceState(history.state,"","?"+s.toString());const o=n?.dataset?.backurl;return o&&sessionStorage.setItem("backUrl",o+"?"+s.toString()),e}}),c=s.get("q");c&&r.triggerSearch(c)}catch(t){console.error("Failed to initialize Pagefind:",t),n.innerHTML=`
          <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            <strong>Search Error:</strong> Failed to load search functionality. ${t}
          </div>
        `}const u=document.querySelector(".pagefind-ui__search-input"),f=document.querySelector(".pagefind-ui__search-clear");u?.addEventListener("input",i),f?.addEventListener("click",i);function i(t){t.target?.value.trim()===""&&history.replaceState(history.state,"",window.location.pathname)}})}document.addEventListener("astro:after-swap",()=>{const n=document.querySelector("#pagefind-search");n&&n.querySelector("form")||g()});g();export{w as _};

const w="modulepreload",y=function(o){return"/AstroPaperBlog/"+o},g={},S=function(d,l,e){let a=Promise.resolve();if(l&&l.length>0){let s=function(n){return Promise.all(n.map(r=>Promise.resolve(r).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),f=t?.nonce||t?.getAttribute("nonce");a=s(l.map(n=>{if(n=y(n),n in g)return;g[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":w,r||(c.as="script"),c.crossOrigin="",c.href=n,f&&c.setAttribute("nonce",f),document.head.appendChild(c),r)return new Promise((h,m)=>{c.addEventListener("load",h),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${n}`)))})}))}function u(s){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=s,window.dispatchEvent(t),!t.defaultPrevented)throw s}return a.then(s=>{for(const t of s||[])t.status==="rejected"&&u(t.reason);return d().catch(u)})};function p(){const o=document.querySelector("#pagefind-search");if(!o)return;const d=new URLSearchParams(window.location.search);(window.requestIdleCallback||(e=>setTimeout(e,1)))(async()=>{try{console.log("Initializing Pagefind with BASE_URL:","/AstroPaperBlog/");const e=document.createElement("script");e.src="/AstroPaperBlog/pagefind/pagefind.js",e.onload=async()=>{console.log("Pagefind.js loaded successfully from:",e.src);try{let a=function(r){r.target?.value.trim()===""&&history.replaceState(history.state,"",window.location.pathname)};window.pagefind&&(window.pagefind.options=window.pagefind.options||{},window.pagefind.options.basePath="/AstroPaperBlog/pagefind/");const{PagefindUI:u}=await S(async()=>{const{PagefindUI:r}=await import("./ui-core.KvT5Bpgd.js");return{PagefindUI:r}},[]);console.log("Creating PagefindUI...");const s=new u({element:"#pagefind-search",showSubResults:!0,showImages:!1,bundlePath:"/AstroPaperBlog/pagefind/",processTerm:function(r){d.set("q",r),history.replaceState(history.state,"","?"+d.toString());const i=o?.dataset?.backurl;return i&&sessionStorage.setItem("backUrl",i+"?"+d.toString()),r}}),t=d.get("q");t&&s.triggerSearch(t);const f=document.querySelector(".pagefind-ui__search-input"),n=document.querySelector(".pagefind-ui__search-clear");f?.addEventListener("input",a),n?.addEventListener("click",a)}catch(a){console.error("Failed to create PagefindUI:",a),o.innerHTML=`
              <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
                <strong>Search UI Error:</strong> Failed to create search interface. ${a}
              </div>
            `}},e.onerror=()=>{console.error("Failed to load pagefind.js from:",e.src),o.innerHTML=`
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
              <strong>Search Error:</strong> Failed to load search engine from ${e.src}
            </div>
          `},console.log("Loading Pagefind script from:",e.src),document.head.appendChild(e)}catch(e){console.error("Failed to initialize Pagefind:",e),o.innerHTML=`
          <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            <strong>Search Error:</strong> Failed to load search functionality. ${e}
          </div>
        `}})}document.addEventListener("astro:after-swap",()=>{const o=document.querySelector("#pagefind-search");o&&o.querySelector("form")||p()});p();export{S as _};

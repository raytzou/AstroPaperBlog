---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

const posts = await getCollection("blog");
const nonDraftPosts = await getCollection("blog", ({ data }) => !data.draft);
---

<Layout title="Debug">
  <main>
    <h1>Debug Information</h1>
    
    <h2>All Posts ({posts.length})</h2>
    <ul>
      {posts.map(post => (
        <li>
          <strong>{post.data.title}</strong> - 
          Draft: {post.data.draft ? 'Yes' : 'No'} - 
          ID: {post.id} - 
          File: {post.filePath}
        </li>
      ))}
    </ul>
    
    <h2>Non-Draft Posts ({nonDraftPosts.length})</h2>
    <ul>
      {nonDraftPosts.map(post => (
        <li>
          <strong>{post.data.title}</strong> - 
          Pub Date: {post.data.pubDatetime} - 
          ID: {post.id}
        </li>
      ))}
    </ul>
    
    <h2>Environment</h2>
    <p>BASE_URL: {import.meta.env.BASE_URL}</p>
    <p>DEV: {import.meta.env.DEV ? 'true' : 'false'}</p>
  </main>
</Layout>
